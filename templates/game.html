{{define "game"}}
<!DOCTYPE html>
<html>
<head>
    <title>{{.Title}}</title>
    <link rel="stylesheet" type="text/css" href="/public/style.css">
</head>
<body>
<div class="container">
    {{if .Won}}
    <h1>Congratulations!</h1>
    <p>You guessed the word "<strong>{{.KeyWord}}</strong>" correctly!</p>
    <a href="/game" class="play-button">Play Again</a>
    {{else if lt .Attempts .MaxAttempts}}
    <div class="game-area">
        <!-- Hints on the left -->
        <div class="side-panel hints">
            <h2>Hints Given</h2>
            <ul>
                {{range .AllHints}}
                <li>{{.}}</li>
                {{end}}
            </ul>
        </div>

        <!-- Guess box in the center -->
        <div class="center-panel">
            <h1><strong>{{.CurrentHint}}</strong></h1>
            <form method="POST" action="/game">
                <input type="text" name="guess" autofocus required>
                <input type="submit" value="Guess">
            </form>

            <!-- Visual representation of remaining guesses -->
            <div class="attempts-visual">
                <div class="circles">
                    {{ $remaining := sub .MaxAttempts .Attempts }}
                    {{ range $i, $ := until .MaxAttempts }}
                    {{ if lt $i $remaining }}
                    <span class="circle filled"></span> <!-- Visible circle -->
                    {{ else }}
                    <span class="circle empty"></span> <!-- Invisible circle -->
                    {{ end }}
                    {{ end }}
                </div>
            </div>
        </div>

        <!-- Guesses on the right -->
        <div class="side-panel guesses">
            <h2>Guesses</h2>
            <ul>
                {{range .Guesses}}
                <li>{{.}}</li>
                {{end}}
            </ul>
        </div>
    </div>

    {{else}}
    <h1>Game Over</h1>
    <p>Sorry, you've used all attempts. The word was "<strong>{{.KeyWord}}</strong>".</p>
    <a href="/game" class="play-button">Play Again</a>
    {{end}}
</div>

</body>
</html>
{{end}}
